{% extends 'index.html' %}

{% block content %}

<h1>Linear Regression</h1>

<h2>{{ user.username }}</h2>
<hr>
<h2>{{ ticker }}</h2>
<hr>

{% if request.method == 'GET' %} 
    <form action="{% url 'monte_carlo_sim' %}" method="post">
        {% csrf_token %}
        <h3>Company ticker:</h3>
        <input type="text" name="ticker" placeholder="Ticker eg. AAPL">
        <h3>Start date:</h3>
        <input type="date" name="start" placeholder="Start date">
        <h3>End date:</h3>
        <input type="date" name="end" placeholder="End date">

        {% comment %} {{ the_div|safe }}

        {{ the_script|safe }} {% endcomment %}
        <input type="submit" class="btn btn-primary">
    </form>
{% else %}
    {% comment %} <p>Beggining date: {{ start }}</p>
    <p>End date: {{ end }}</p>
    <p>Prediction accuracy: {{ confidence }}%</p>
    
    <canvas id="myChart"></canvas>
    <script type="text/javascript">
        
    var ctx = document.getElementById('myChart').getContext('2d');
    var chart = new Chart(ctx, {
        // The type of chart we want to create
        type: 'line',

        // The data for our dataset
        data: {
            labels: ["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22",
            "23","24","25","26","27","28","29","30"],
            datasets: [{
                label: "Volume",
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: [{% for pred in forecast_pred %}{{pred}},{% endfor %}],
            },
                ]
        },

        // Configuration options go here
        options: {}
    });
    </script> {% endcomment %}
    {% comment %} {% for pred in forecast_pred %}
    <p>Prediction: {{pred}}</p>
    {% endfor %} {% endcomment %}
{% endif %}

{% if error_msg %}
    <p>{{error_msg}}</p>
{% endif %}



{% endblock content %}